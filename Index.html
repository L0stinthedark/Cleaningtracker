<!DOCTYPE html><html><head><meta http-equiv="Content-Security-Policy" content="default-src 'self' 'unsafe-inline' 'unsafe-eval' data: blob: https://cdnjs.cloudflare.com https://cdn.jsdelivr.net https://code.jquery.com https://unpkg.com https://d3js.org https://threejs.org https://cdn.plot.ly https://stackpath.bootstrapcdn.com https://maps.googleapis.com https://cdn.tailwindcss.com https://ajax.googleapis.com https://kit.fontawesome.com https://cdn.datatables.net https://maxcdn.bootstrapcdn.com https://code.highcharts.com https://tako-static-assets-production.s3.amazonaws.com https://www.youtube.com https://fonts.googleapis.com https://fonts.gstatic.com https://pfst.cf2.poecdn.net https://puc.poecdn.net https://i.imgur.com https://wikimedia.org https://*.icons8.com https://*.giphy.com https://picsum.photos https://images.unsplash.com; frame-src 'self' https://www.youtube.com https://trytako.com; child-src 'self'; manifest-src 'self'; worker-src 'self'; upgrade-insecure-requests; block-all-mixed-content;">
    <title>Cleaning Business Tracker</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="manifest" href="data:application/json;base64,eyJuYW1lIjoiQ2xlYW5pbmcgVHJhY2tlciIsInNob3J0X25hbWUiOiJUcmFja2VyIiwiZGlzcGxheSI6InN0YW5kYWxvbmUiLCJzdGFydF91cmwiOiIuLyIsImljb25zIjpbeyJzcmMiOiJkYXRhOmltYWdlL3N2Zyt4bWw7YmFzZTY0LFBEOTRiV3dnZG1WeWMybHZiajBpTVM0d0lpQmxibU52WkdsdVp6MGlhWE52TFRnNE5Ua3RNU0kvUGcwS1BDRXRMU0JIWlc1bGNtRjBiM0k2SUVGa2IySmxJRWxzYkhWemRISmhkRzl5SURJMUxqQXVNQ3dnVTFaSElFVjRjRzl5ZENCUWJIVm5MVWx1SUM0Z1UxWkhJRlpsY25OcGIyNDZJRFl1TURBZ1FuVnBiR1FnTUNrZ0lDMHRQZzBLUEhOMlp5QjJaWEp6YVc5dVBTSXhMakVpSUdsa1BTSkRiR1ZoYm1sdVoxUnlZV05yWlhJaUlIaHRiRzV6UFNKb2RIUndPaTh2ZDNkM0xuY3pMbTl5Wnk4eU1EQXdMM04yWnlJZ2VHMXNibk02ZUd4cGJtczlJbWgwZEhBNkx5OTNkM2N1ZHpNdWIzSm5MekU1T1RrdmVHeHBibXNpSUhnOUlqQndlQ0lnZVQwaU1IQjRJZzBLQ1NCMmFXVjNRbTk0UFNJd0lEQWdNVEF3SURFd01DSWdkMmxrZEdnOUlqRXdNQ1VpSUdGemRHbHZiajBpYm05dVpTSWdjbVZ3WVhKcmN6MGllRzFzYm5NNmNtVndZWEpyY3lBOUlHaDBkSEE2THk5M2QzY3Vkek11YjNKbkx6SXdNREF2Y21Wd1lYSnJjeUlOQ2p4eVpXTjBJSGc5SWpFd0pTSWdlVDBpTVRBbElpQjNhV1IwYUQwaU1UQWxJaUJvWldsbmFIUTlJakV3SlNJZ2JtRjJhV2RoZEdsdmJqMGlZbXhoWTJzaVBqd3ZjbVZqZEQ0TkNqeHlaV04wSUhnOUlqVXdKU0lnZVQwaU1DVWlJSGRwWkhSb1BTSXhNQ1VpSUdobGFXZG9kRDBpTVRBbElpQnVZWFpwWjJGMGFXOXVQU0ppYkdGamF5SStQQzl5WldOMFBnMEtQQzl6ZG1jKyI6eyJzaXplcyI6WzUxMl19fV19">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
        }

        body {
            background: #f0f2f5;
            padding: 16px;
            padding-bottom: 80px;
        }

        .header {
            background: #fff;
            padding: 16px;
            border-radius: 12px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
            margin-bottom: 16px;
        }

        .title {
            font-size: 24px;
            font-weight: bold;
            color: #1a1a1a;
            margin-bottom: 16px;
            text-align: center;
        }

        .stats {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 8px;
            margin-bottom: 16px;
        }

        .stat-box {
            background: #f8fafc;
            padding: 12px;
            border-radius: 8px;
            text-align: center;
        }

        .stat-label {
            font-size: 12px;
            color: #64748b;
            margin-bottom: 4px;
        }

        .stat-value {
            font-size: 18px;
            font-weight: bold;
            color: #0f172a;
        }

        .form {
            background: #fff;
            padding: 16px;
            border-radius: 12px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
            margin-bottom: 16px;
        }

        input, select {
            width: 100%;
            padding: 12px;
            margin-bottom: 8px;
            border: 1px solid #e2e8f0;
            border-radius: 8px;
            font-size: 16px;
        }

        button {
            width: 100%;
            padding: 12px;
            background: #2563eb;
            color: white;
            border: none;
            border-radius: 8px;
            font-size: 16px;
            font-weight: bold;
            cursor: pointer;
        }

        button:active {
            background: #1d4ed8;
        }

        .job-list {
            background: #fff;
            border-radius: 12px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
            overflow: hidden;
        }

        .job-item {
            padding: 16px;
            border-bottom: 1px solid #e2e8f0;
        }

        .job-header {
            display: flex;
            justify-content: space-between;
            margin-bottom: 8px;
        }

        .job-date {
            font-size: 14px;
            color: #64748b;
        }

        .job-amount {
            font-weight: bold;
            color: #059669;
        }

        .job-client {
            font-weight: bold;
            margin-bottom: 4px;
        }

        .job-details {
            font-size: 14px;
            color: #64748b;
        }

        .delete-btn {
            background: #ef4444;
            padding: 8px;
            margin-top: 8px;
        }

        .install-prompt {
            position: fixed;
            bottom: 16px;
            left: 16px;
            right: 16px;
            background: #fff;
            padding: 16px;
            border-radius: 12px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
            display: none;
        }
    </style>
</head>
<body>
    <div class="header">
        <h1 class="title">Cleaning Business Tracker</h1>
        <div class="stats">
            <div class="stat-box">
                <div class="stat-label">Total Jobs</div>
                <div class="stat-value" id="totalJobs">0</div>
            </div>
            <div class="stat-box">
                <div class="stat-label">Total Income</div>
                <div class="stat-value" id="totalIncome">$0</div>
            </div>
            <div class="stat-box">
                <div class="stat-label">Avg. Job</div>
                <div class="stat-value" id="avgJob">$0</div>
            </div>
        </div>
    </div>

    <form class="form" id="jobForm">
        <input type="date" id="date" required="">
        <input type="text" placeholder="Client Name" id="client" required="">
        <input type="text" placeholder="Service Type" id="service">
        <input type="number" placeholder="Duration (hours)" id="duration">
        <input type="number" placeholder="Amount ($)" id="amount" required="" step="0.01">
        <button type="submit">Add Job</button>
    </form>

    <div id="jobList" class="job-list"></div>

    <div class="install-prompt" id="installPrompt">
        <p>Add this app to your home screen for easy access!</p>
        <button id="installButton">Install App</button>
    </div>

    <script>
        let jobs = JSON.parse(localStorage.getItem('jobs')) || [];
        let deferredPrompt;

        function updateStats() {
            const totalJobs = jobs.length;
            const totalIncome = jobs.reduce((sum, job) => sum + parseFloat(job.amount), 0);
            const avgJob = totalJobs ? totalIncome / totalJobs : 0;

            document.getElementById('totalJobs').textContent = totalJobs;
            document.getElementById('totalIncome').textContent = `$${totalIncome.toFixed(2)}`;
            document.getElementById('avgJob').textContent = `$${avgJob.toFixed(2)}`;
        }

        function renderJobs() {
            const jobList = document.getElementById('jobList');
            jobList.innerHTML = '';

            jobs.sort((a, b) => new Date(b.date) - new Date(a.date)).forEach((job, index) => {
                const jobElement = document.createElement('div');
                jobElement.className = 'job-item';
                jobElement.innerHTML = `
                    <div class="job-header">
                        <span class="job-date">${new Date(job.date).toLocaleDateString()}</span>
                        <span class="job-amount">$${parseFloat(job.amount).toFixed(2)}</span>
                    </div>
                    <div class="job-client">${job.client}</div>
                    <div class="job-details">
                        ${job.service} ${job.duration ? `- ${job.duration} hours` : ''}
                    </div>
                    <button class="delete-btn" onclick="deleteJob(${index})">Delete</button>
                `;
                jobList.appendChild(jobElement);
            });
        }

        function addJob(e) {
            e.preventDefault();
            const job = {
                date: document.getElementById('date').value,
                client: document.getElementById('client').value,
                service: document.getElementById('service').value,
                duration: document.getElementById('duration').value,
                amount: document.getElementById('amount').value
            };

            jobs.push(job);
            localStorage.setItem('jobs', JSON.stringify(jobs));
            
            e.target.reset();
            updateStats();
            renderJobs();
        }

        function deleteJob(index) {
            if (confirm('Are you sure you want to delete this job?')) {
                jobs.splice(index, 1);
                localStorage.setItem('jobs', JSON.stringify(jobs));
                updateStats();
                renderJobs();
            }
        }

        document.getElementById('jobForm').addEventListener('submit', addJob);

        // PWA Install Prompt
        window.addEventListener('beforeinstallprompt', (e) => {
            e.preventDefault();
            deferredPrompt = e;
            document.getElementById('installPrompt').style.display = 'block';
        });

        document.getElementById('installButton').addEventListener('click', async () => {
            if (deferredPrompt) {
                deferredPrompt.prompt();
                const { outcome } = await deferredPrompt.userChoice;
                if (outcome === 'accepted') {
                    document.getElementById('installPrompt').style.display = 'none';
                }
                deferredPrompt = null;
            }
        });

        // Initialize
        updateStats();
        renderJobs();
    </script>


</body></html>
